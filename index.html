<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entrix</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#007bff">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-functions-compat.js"></script>
    <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
    <header>
        <h1>Entrix</h1>
        <nav id="main-nav">
            </nav>
        <div id="auth-status">
            <span id="user-display"></span>
            <button id="logout-btn" style="display:none;">Logout</button>
        </div>
    </header>

    <main id="app-content">
        <div id="login-section">
            <h2>Login</h2>
            <input type="email" id="login-email" placeholder="Email">
            <input type="password" id="login-password" placeholder="Password">
            <button id="login-btn">Login</button>
            <p id="login-error" class="error-message"></p>
        </div>

        <div id="admin-dashboard" class="dashboard-section" style="display:none;">
            <h2>Admin Dashboard</h2>

            <h3>Manage Users</h3>
            <div id="user-management" class="admin-subsection">
                <h4>Add New User</h4>
                <form id="add-user-form">
                    <input type="email" id="new-user-email" placeholder="Email" required>
                    <input type="password" id="new-user-password" placeholder="Password" required>
                    <select id="new-user-role" required>
                        <option value="">Select Role</option>
                        <option value="admin">Admin</option>
                        <option value="scanner">Scanner</option>
                        <option value="parent">Parent</option>
                    </select>
                    <input type="text" id="new-user-student-id" placeholder="Student ID (for Parent)" style="display: none;">
                    <button type="submit">Add User</button>
                    <p id="add-user-status"></p>
                </form>

                <h4>Existing Users</h4>
                <ul id="user-list">
                    <li>Loading users...</li> </ul>
            </div>
            <h3>Manage Students</h3>
            <div id="student-management" class="dashboard-section" style="display:none;">
                <h3>Add Student</h3>
                <form id="add-student-form">
                    <input type="text" id="student-id" placeholder="Student ID" required>
                    <input type="text" id="student-name" placeholder="Student Name" required>
                    <input type="email" id="student-parent-email" placeholder="Parent Email (optional)">
                    <button type="submit">Add Student</button>
                </form>
                <h3>Student List</h3>
                <ul id="student-list">
                    </ul>
            </div>
            <h3>Reports</h3>
            <div id="admin-reports" class="dashboard-section" style="display:none;">
                <p>Reports will go here. (Not yet implemented in detail)</p>
            </div>
        </div>

        <div id="scanner-dashboard" class="dashboard-section" style="display:none;">
            <h2>Scanner Dashboard</h2>
            <div id="qr-reader" style="width: 500px;"></div>
            <p id="scan-status"></p>
            <div id="last-scan-info">
                <h3>Last Scanned Student:</h3>
                <p><strong>Name:</strong> <span id="scanned-student-name"></span></p>
                <p><strong>ID:</strong> <span id="scanned-student-id"></span></p>
                <p><strong>Status:</strong> <span id="scanned-student-status"></span></p>
                <p><strong>Time:</strong> <span id="scanned-student-time"></span></p>
            </div>
        </div>

        <div id="parent-dashboard" class="dashboard-section" style="display:none;">
            <h2>Parent Dashboard</h2>
            <p>Welcome, Parent!</p>
            <div id="child-attendance">
                <h3>Your Child's Attendance:</h3>
                </div>
        </div>
    </main>

    <script src="js/app.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/database.js"></script>
    <script src="js/scanner.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/parent.js"></script>
</body>
</html>
